{"version":3,"file":"/js/media/media.min.js","mappings":"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","sources":["webpack:///./resources/js/media/media.js"],"sourcesContent":["let baseUrl = document.querySelector('meta[name=\"base-url\"]').getAttribute('content');\ndocument.addEventListener('DOMContentLoaded', function() {\n    let selectedMediaUrl = '';\n    let currentImageContainer = '';\n    let currentHiddenInput = '';\n    let videoInputCounter = 0; // Initialize a counter for dynamic IDs\n\n    function initializeImageSelection(button) {\n        button.addEventListener('click', function() {\n            currentImageContainer = this.getAttribute('data-image-container');\n            currentHiddenInput = this.getAttribute('data-hidden-input');\n        });\n    }\n\n    function initializeModal() {\n        document.querySelectorAll('button[data-bs-target=\"#exampleModal\"]').forEach(function(button) {\n            initializeImageSelection(button);\n        });\n    }\n\n    function selectMedia(mediaUrl, mediaElement) {\n        selectedMediaUrl = mediaUrl;\n\n        // Remove active class from all media elements\n        document.querySelectorAll('#mediaLibraryContent img, #mediaLibraryContent video').forEach(function(media) {\n            media.classList.remove('iq-image');\n        });\n\n        // Add active class to the selected media element\n        mediaElement.classList.add('iq-image');\n    }\n\n    if (document.getElementById('mediaLibraryContent')) {\n        document.getElementById('mediaLibraryContent').addEventListener('click', function(event) {\n            if (event.target.tagName === 'IMG') {\n                var mediaUrl = event.target.src;\n                selectMedia(mediaUrl, event.target);\n            } else if (event.target.tagName === 'VIDEO') {\n                var mediaUrl = event.target.querySelector('source').src;\n                selectMedia(mediaUrl, event.target);\n                event.preventDefault();\n            }\n        });\n    }\n\n    if (document.getElementById('mediaSubmitButton')) {\n      document.getElementById('mediaSubmitButton').addEventListener('click', function() {\n          if (selectedMediaUrl && currentImageContainer && currentHiddenInput) {\n              var selectedImageContainer = document.getElementById(currentImageContainer);\n              var mediaUrlInput = document.getElementById(currentHiddenInput);\n              if (selectedImageContainer) {\n                  mediaUrlInput.value = selectedMediaUrl;\n\n                  selectedImageContainer.innerHTML = '';\n\n                  // Check if there's an element with id iq-video-quality\n\n                  if (mediaUrlInput.hasAttribute('data-validation')) {\n                      // Only allow video selection\n                      if (selectedMediaUrl.endsWith('.mp4') || selectedMediaUrl.endsWith('.avi')) {\n                          var video = document.createElement('video');\n                          video.src = selectedMediaUrl;\n                          video.controls = true;\n                          video.classList.add('img-fluid', 'mb-2');\n                          video.style.maxWidth = '300px';\n                          video.style.maxHeight = '300px';\n\n                          selectedImageContainer.appendChild(video);\n\n                          var crossIcon = document.createElement('span');\n                          crossIcon.innerHTML = '&times;';\n                          crossIcon.classList.add('remove-media-icon');\n                          crossIcon.style.cursor = 'pointer';\n                          crossIcon.style.fontSize = '24px';\n                          crossIcon.style.marginLeft = '10px';\n                          crossIcon.addEventListener('click', function() {\n                              selectedImageContainer.innerHTML = '';\n                              mediaUrlInput.value = '';\n                          });\n\n                          selectedImageContainer.appendChild(crossIcon);\n                      } else {\n                          // Show error for incorrect media type\n                          var errorElement = document.createElement('div');\n                          errorElement.classList.add('text-danger');\n                          errorElement.textContent = 'Only video files are allowed.';\n                          selectedImageContainer.appendChild(errorElement);\n                      }\n                  } else {\n\n                    if(selectedMediaUrl.endsWith('.png') || selectedMediaUrl.endsWith('.jpg')){\n                      // For other cases, default behavior (assuming image upload or other media)\n                      var img = document.createElement('img');\n                      img.src = selectedMediaUrl;\n                      img.classList.add('img-fluid', 'mb-2');\n                      img.style.maxWidth = '100px';\n                      img.style.maxHeight = '100px';\n\n                      selectedImageContainer.appendChild(img);\n\n                      var crossIcon = document.createElement('span');\n                      crossIcon.innerHTML = '&times;';\n                      crossIcon.classList.add('remove-media-icon');\n                      crossIcon.style.cursor = 'pointer';\n                      crossIcon.style.fontSize = '24px';\n                      crossIcon.style.marginLeft = '10px';\n                      crossIcon.addEventListener('click', function() {\n                          selectedImageContainer.innerHTML = '';\n                          mediaUrlInput.value = '';\n                      });\n\n                      selectedImageContainer.appendChild(crossIcon);\n                    } else {\n                      var errorElement = document.createElement('div');\n                          errorElement.classList.add('text-danger');\n                          errorElement.textContent = 'Only image files are allowed.';\n                          selectedImageContainer.appendChild(errorElement);\n                    }\n\n                  }\n\n\n                  $('#exampleModal').modal('hide');\n              }\n          }\n      });\n  }\n\n  if(document.getElementById('submitButton')){\n    document.getElementById('submitButton').addEventListener('click', function(event) {\n      event.preventDefault(); // Prevent the default form submission\n\n      var formData = new FormData();\n      var remainingFiles = window.uploadedFiles.filter(file => !file.removed);\n\n      if (remainingFiles.length > 0) {\n          for (var i = 0; i < remainingFiles.length; i++) {\n              formData.append('file_url[]', remainingFiles[i].file);\n          }\n\n          // Submit the form with remaining files\n          var xhr = new XMLHttpRequest();\n          xhr.open('POST', `${baseUrl}/app/filemanagers/store`, true);\n          xhr.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')); // Set CSRF token header\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n                // Redirect or show success message after successful submission\n                document.getElementById('nav-media-library-tab').click();\n\n                fetch(`${baseUrl}/app/filemanagers/getMediaStore`) // Replace with your actual path to refresh media library content\n                    .then(response => response.json())\n                    .then(data => {\n                        var mediaLibraryContent = document.getElementById('mediaLibraryContent');\n                        mediaLibraryContent.innerHTML = ''; // Clear existing content\n\n                        data.response.forEach(url => {\n                          if (url.endsWith('.mp4') || url.endsWith('.avi')) {\n                            var video = document.createElement('video');\n                            video.src = url;\n                            video.controls = true;\n                            video.classList.add('img-fluid', 'mb-2');\n                            video.style.maxWidth = '300px';\n                            video.style.maxHeight = '300px';\n\n                            mediaLibraryContent.appendChild(video);\n\n                        } else {\n                          var img = document.createElement('img');\n                          img.classList.add('img-fluid');\n                          img.src = url;\n                          img.id = 'nav-media-img';\n                          img.style.width = '10rem';\n                          img.style.height = '10rem';\n                          mediaLibraryContent.appendChild(img);\n                        }\n                        });\n                    })\n                    .catch(error => console.error('Error:', error));\n            }\n        };\n\n          xhr.send(formData);\n      }\n\n      if(window.location.href === `${baseUrl}/app/filemanagers`){\n        window.location.reload();\n      }\n  });\n  }\nconsole.log(window.location.href === `${baseUrl}/app/filemanagers`)\n    function destroySelect2(section) {\n        section.find('select.select2').each(function() {\n            if ($(this).data('select2')) {\n                $(this).select2('destroy');\n            }\n        });\n    }\n\n    function initializeSelect2(section) {\n        section.find('select.select2').each(function() {\n            $(this).select2({\n                width: '100%'\n            });\n        });\n    }\n\n    $('#add_more_video').click(function() {\n        var originalSection = $('.video-inputs-container').first();\n        destroySelect2(originalSection);\n\n        var newSection = originalSection.clone();\n        videoInputCounter++; // Increment the counter\n\n        newSection.find('input, select').each(function() {\n            var idAttr = $(this).attr('id');\n            if (idAttr) {\n                $(this).attr('id', idAttr + videoInputCounter);\n            }\n\n            var nameAttr = $(this).attr('name');\n            if (nameAttr) {\n                $(this).attr('name', nameAttr + videoInputCounter);\n            }\n\n            $(this).val('').trigger('change');\n        });\n\n        newSection.find('.remove-video-input').removeClass('d-none');\n\n        newSection.find('[data-image-container]').each(function() {\n            var dataAttr = $(this).attr('data-image-container');\n            $(this).attr('data-image-container', dataAttr + videoInputCounter);\n        });\n\n        newSection.find('[data-hidden-input]').each(function() {\n            var dataAttr = $(this).attr('data-hidden-input');\n            $(this).attr('data-hidden-input', dataAttr + videoInputCounter);\n        });\n\n        newSection.find('.img-fluid').remove();\n        newSection.find('.remove-media-icon').remove();\n        newSection.find('input[type=\"hidden\"]').val('');\n\n        newSection.find('div[id]').each(function() {\n            var idAttr = $(this).attr('id');\n            if (idAttr) {\n                $(this).attr('id', idAttr + videoInputCounter);\n            }\n        });\n\n        $('#video-inputs-container-parent').append(newSection);\n\n        initializeSelect2(newSection);\n        initializeModal();\n    });\n\n    $(document).on('click', '.remove-video-input', function() {\n        $(this).closest('.video-inputs-container').remove();\n    });\n\n    initializeModal();\n    initializeSelect2($(document));\n});\n\n\n\n\n  if(document.getElementById('file_url_media')){\n    document.getElementById('file_url_media').addEventListener('change', function() {\n        var fileInput = document.getElementById('file_url_media');\n        var uploadedImagesContainer = document.getElementById('uploadedImages');\n        var chunkSize = 1024 * 1024 * 30; // 100 MB chunk size (adjust as necessary)\n        var uploadedFiles = [];\n\n        // Clear previously uploaded images and reset progress\n        uploadedImagesContainer.innerHTML = '';\n\n        if (fileInput.files.length > 0) {\n            for (var i = 0; i < fileInput.files.length; i++) {\n                var file = fileInput.files[i];\n                var start = 0;\n                var end = Math.min(chunkSize, file.size);\n                var index = 0;\n\n                if (file.type.startsWith('video/')) {\n                    var video = document.createElement('video');\n                    video.src = URL.createObjectURL(file);\n                    video.currentTime = 1; // Capture frame at 1 second\n\n                    video.addEventListener('loadeddata', function() {\n                        var canvas = document.createElement('canvas');\n                        canvas.width = video.videoWidth;\n                        canvas.height = video.videoHeight;\n                        var ctx = canvas.getContext('2d');\n                        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                        var img = document.createElement('img');\n                        img.src = canvas.toDataURL('image/jpeg');\n                        img.classList.add('img-fluid', 'iq-uploaded-image');\n                        img.style.width = '150px'; // Adjust size as needed\n                        img.style.height = '100px';\n\n                        // Create progress bar\n                        var progressBar = document.createElement('div');\n                        progressBar.classList.add('progress', 'mb-3', 'iq-progress');\n                        progressBar.innerHTML = `\n                            <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                        `;\n\n                        // Create close icon\n                        var closeButton = document.createElement('div');\n                        closeButton.classList.add('iq-uploaded-image-close');\n                        closeButton.innerHTML = '&times;';\n                        closeButton.addEventListener('click', function() {\n                            uploadedFiles[index].removed = true; // Mark file as removed\n                            this.parentNode.remove(); // Remove image on close icon click\n                        });\n\n                        // Append image, progress bar, and close icon\n                        var imageContainer = document.createElement('div');\n                        imageContainer.classList.add('iq-uploaded-image-container', 'd-flex', 'gap-5', 'align-items-center');\n                        imageContainer.appendChild(img);\n                        imageContainer.appendChild(progressBar);\n                        imageContainer.appendChild(closeButton);\n                        uploadedImagesContainer.appendChild(imageContainer);\n\n                        // Track the uploaded file\n                        uploadedFiles.push({ file: file, removed: false, progressBar: progressBar.querySelector('.progress-bar') });\n\n                        uploadChunk(file, index, start, end, chunkSize, uploadedFiles);\n                    });\n                } else {\n                    var reader = new FileReader();\n                    reader.onload = (function(file, index) {\n                        return function(e) {\n                            var img = document.createElement('img');\n                            img.src = e.target.result;\n                            img.classList.add('img-fluid', 'iq-uploaded-image');\n                            img.style.width = '150px'; // Adjust size as needed\n                            img.style.height = '100px';\n\n                            // Create progress bar\n                            var progressBar = document.createElement('div');\n                            progressBar.classList.add('progress', 'mb-3', 'iq-progress');\n                            progressBar.innerHTML = `\n                                <div class=\"progress-bar\" role=\"progressbar\" style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                            `;\n\n                            // Create close icon\n                            var closeButton = document.createElement('div');\n                            closeButton.classList.add('iq-uploaded-image-close');\n                            closeButton.innerHTML = '&times;';\n                            closeButton.addEventListener('click', function() {\n                                uploadedFiles[index].removed = true; // Mark file as removed\n                                this.parentNode.remove(); // Remove image on close icon click\n                            });\n\n                            // Append image, progress bar, and close icon\n                            var imageContainer = document.createElement('div');\n                            imageContainer.classList.add('iq-uploaded-image-container', 'd-flex', 'gap-5', 'align-items-center');\n                            imageContainer.appendChild(img);\n                            imageContainer.appendChild(progressBar);\n                            imageContainer.appendChild(closeButton);\n                            uploadedImagesContainer.appendChild(imageContainer);\n\n                            // Track the uploaded file\n                            uploadedFiles.push({ file: file, removed: false, progressBar: progressBar.querySelector('.progress-bar') });\n\n                            uploadChunk(file, index, start, end, chunkSize, uploadedFiles);\n                        };\n                    })(file, i);\n\n                    reader.readAsDataURL(file);\n                }\n            }\n        }\n\n        // Track the uploaded files globally\n        window.uploadedFiles = uploadedFiles;\n    });\n  }\n\n  function uploadChunk(file, index, start, end, chunkSize, uploadedFiles) {\n    var chunk = file.slice(start, end);\n    var formData = new FormData();\n    formData.append('file_chunk', chunk);\n    formData.append('index', index);\n    formData.append('total_chunks', Math.ceil(file.size / chunkSize));\n    formData.append('file_name', file.name);\n\n    // AJAX request to upload chunk\n    var xhr = new XMLHttpRequest();\n\n    // Track upload progress\n    xhr.upload.addEventListener('progress', function(e) {\n        if (e.lengthComputable) {\n            var percentComplete = (e.loaded / e.total) * 100;\n            uploadedFiles[index].progressBar.style.width = percentComplete + '%';\n        }\n    });\n\n    xhr.open('POST', `${baseUrl}/app/filemanagers/upload`, true);\n    xhr.setRequestHeader('X-CSRF-TOKEN', document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content')); // Set CSRF token header\n\n    xhr.onload = function() {\n        if (xhr.status === 200) {\n            var response = JSON.parse(xhr.responseText);\n            if (response.success) {\n                if (end < file.size) {\n                    start = end;\n                    end = Math.min(start + chunkSize, file.size);\n                    uploadChunk(file, index, start, end, chunkSize, uploadedFiles);\n                } else {\n                    uploadedFiles[index].progressBar.style.width = '100%';\n                }\n            }\n        }\n    };\n\n    xhr.send(formData);\n  }\n"],"names":["baseUrl","document","querySelector","getAttribute","uploadChunk","file","index","start","end","chunkSize","uploadedFiles","chunk","slice","formData","FormData","append","Math","ceil","size","name","xhr","XMLHttpRequest","upload","addEventListener","e","lengthComputable","percentComplete","loaded","total","progressBar","style","width","open","concat","setRequestHeader","onload","status","JSON","parse","responseText","success","min","send","selectedMediaUrl","currentImageContainer","currentHiddenInput","videoInputCounter","initializeModal","querySelectorAll","forEach","button","this","initializeImageSelection","selectMedia","mediaUrl","mediaElement","media","classList","remove","add","initializeSelect2","section","find","each","$","select2","getElementById","event","target","tagName","src","preventDefault","selectedImageContainer","mediaUrlInput","value","innerHTML","hasAttribute","endsWith","video","createElement","controls","maxWidth","maxHeight","appendChild","crossIcon","cursor","fontSize","marginLeft","errorElement","textContent","img","modal","remainingFiles","window","filter","removed","length","i","click","fetch","then","response","json","data","mediaLibraryContent","url","id","height","error","console","location","href","reload","log","originalSection","first","newSection","clone","idAttr","attr","nameAttr","val","trigger","removeClass","dataAttr","on","closest","fileInput","uploadedImagesContainer","files","type","startsWith","URL","createObjectURL","currentTime","canvas","videoWidth","videoHeight","getContext","drawImage","toDataURL","closeButton","parentNode","imageContainer","push","reader","FileReader","result","readAsDataURL"],"sourceRoot":""}